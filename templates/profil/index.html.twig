{% extends 'base.html.twig' %}

{% block title %}Hello ProfilController!
{% endblock %}

{% block body %}

	<div class="container">
		<h1 class="mt-5">Hello
			{{ app.user.firstname }}!</h1>
		{% if not is_granted('ROLE_ADMIN') %}
			<h6>Welcome to your profil, here you can change your informations or contact us about your orders.</h6>
		{% endif %}
		{% if is_granted('ROLE_ADMIN') %}
			<h6>Welcome to your Admin profil, here you can change your informations.</h6>
		{% endif %}

		<div class="container mt-5">
			<div class="row d-flex justify-content-center">
				<div class="col-3">
					{% for item in app.user.adresses %}

						<div class="list-group">

							<a href="#" class="list-group-item list-group-item-action flex-column align-items-start">
								<div class="d-flex w-100 justify-content-between">
									<h5 class="mb-1">{{ app.user.firstname ~ ' ' ~ app.user.lastname }}</h5>
									<small>Selected</small>
								
								<p class="mb-1">{{ item.adresse }}</p>
								<p>{{ item.zipcode ~ ' ' ~ item.city }}</p>
								<p>{{ item.country }}</p>
								</div>
							</a>

							{# bouton check box a faire fonctionner : afficher en bleu l'adresse active et afficher le small selected si pas selectionner laisser blanc sans small selected#}
							<div class="form-check">
								<a href="{{ path('select_adresse_delivery', {'id': item.id}) }}">
									<input class="form-check-input" type="checkbox" value="Select by default" id="flexCheckChecked" {% if item.delivery %} checked {% endif %}></a>
							</div>

						</div>


					{% endfor %}
				</div>
				<div class="col-md-7">
					<div class="card p-3 py-4">
						<div class="text-center mt-3">
							<h5 class="mt-2 mb-0">{{ app.user.firstname ~ ' ' ~ app.user.lastname }}</h5>
							<div class="px-4 mt-1">

								<p>{{ app.user.email }}</p>

							</div>
							<a aria-current="adresse_index" class="btn btn-secondary" href="{{ path('adresse_new') }}">Create a new adresse</a>
						</div>
					</div>
				</div>

			</div>
		</div>
		{% if not is_granted('ROLE_ADMIN') %}
			<div class="card mt-10 p-3 py-4">
				<div class="text-center">
					<h4>A probleme,
						{{ app.user.firstname }}
						?</h4>
				</div>

				{# <a aria-current="contact" class="btn btn-secondary" href="{{ path('new_contact') }}">Contact</a> #}
			{% endif %}
		</div>
	{% endblock %}
